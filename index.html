<!DOCTYPE html>
<html>
    <head>

        <style>
            @import url('sp://import/css/api.css');
            @import url('sp://import/css/list.css');
            @import url('sp://import/css/player.css');
            @import url('sp://import/css/eve.css');
            
            @font-face {
                font-family: 'Bellerose';
                src: url('sp://radiomap/Bellerose.ttf') format('truetype');
            }
            
            html {background-color: #010f18;}
            body {background-color: #010f18; overflow-x: hidden;}
            #mapdiv {overflow: hidden;height:300px;}
            #branded_area {height:30px; text-align:center;
            z-index: 100;
            background: -webkit-linear-gradient(top, #010f18 0%,#062a40 100%);}
            #app_name {padding-top:5px; color: white; font: 'Bellerose';}
                       
            #header_text {padding: 10px;}
            
            .leaflet_popup_pane {display: none;}
            .leaflet_tile_pane {display: none;}

            .left {float:left; width:10em} 
            .right {float:right; width:10em}
        </style>
        <link rel="stylesheet" href="sp://radiomap/leaflet/leaflet.css" />
        
        <script src="sp://radiomap/leaflet/leaflet-src.js"></script>
        <script src="sp://radiomap/js/jquery.min.js"></script>
        <script src="sp://radiomap/js/lastfm.js"></script>
    </head>

    <body onload="sp = getSpotifyApi(1); tutorial = sp.require('tutorial'); tutorial.init(); setup_highlights();">
   
    <div id="body"> 
         <div id="branded_area">
             <div id="app_name">MusicMapp</div>
         </div>
         <div id="wrapper">
            <div id="mapdiv"></div>
         </div><!-- /wrapper -->
         <script src="sp://radiomap/js/map.js"></script>
         <div id="buttons">
            <div class="left">
                <button class="load_data button" onClick="getSongsForSelectedCountry();" >Go go gadget!</button>
            </div>
            <div class="right">
                <button class="add-playlist button icon"><span class="plus"></span>Add as Playlist</button>
            </div>
         </div>

         <div id="player"></div>
    </div>

    <script>
    
    function setup_highlights() {
        $('path').click(function () {
            $('path').css('stroke','blue')
            $('path').css('fill','blue')
            $(this).css('stroke','lime')
            $(this).css('fill','lime')
        });
        
    }
    
    function getSongsForSelectedCountry() {
        var country = $('.leaflet-popup-content').text();
        if(country.length > 0)
            getLastFmTopTrack(country);
    }
    
    </script>
    </body>
</html>
